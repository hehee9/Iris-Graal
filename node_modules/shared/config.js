/**
 * @file node_modules/shared/config.js
 * @description 각종 상수 설정
 */


/** @description 각종 파일 경로 */
const PATH_ROOT = "sdcard/botData";
const PATH_LOG = `${PATH_ROOT}/log`;
const PATH_CONFIG = `${PATH_ROOT}/config`;

const PATH_FEATURE_FLAGS = `${PATH_CONFIG}/featureFlags`;
const PATH_ADMIN_LIST = `${PATH_CONFIG}/admin.json`;
const PATH_BAN_LIST = `${PATH_CONFIG}/ban.json`;

const PATH_CHAT_ROOM_CACHE = `${PATH_CONFIG}/roomCache.json`;
const PATH_FIRST_CHAT = `${PATH_CONFIG}/firstRoom.json`;


/** @description 사전 정보 로딩 */
const ADMIN_IDS = FileStream.readJson(PATH_ADMIN_LIST) || [];


/** @description 메시지/피드 타입 */
const TYPES = {
    "0": "피드",
    "1": "순수 텍스트 메시지",
    "2": "사진",
    "3": "동영상",
    "4": "연락처 공유",
    "5": "음성 메시지",
    "6": "움직이는 이모티콘",
    "7": "선물하기?",
    "12": "이모티콘",
    "13": "일정",
    "14": "투표",
    "16": "위치 공유",
    "17": "카카오톡 프로필 공유",
    "18": "첨부파일",
    "20": "움직이는 이모티콘",
    "23": "샵검색",
    "24": "포스트",
    "25": "소리+움직이는 이모티콘",
    "26": "답장",
    "27": "사진 여러 장",
    "51": "보이스톡 / 페이스톡",
    "52": "라이브톡",
    "71": "카카오링크",
    "72": "알림톡",
    "96": "오픈채팅 일정",
    "97": "오픈채팅 투표",
    "98": "공지 등록 / 공유",
    "100": "숏폼"
};
const FEED_TYPES = {
    "2": "퇴장",
    "4": "입장",
    "6": "강퇴",
    "11": "부방장 등록",
    "12": "부방장 해제",
    "23": "공식봇 입퇴장",
    "26": "가리기",
    "27": "관리자만 말하기 설정"
};


/** @description Iris 서버 관련 */
const IRIS_URL = "http://127.0.0.1:3000"; // 본인 환경에 맞춰 설정
const IRIS_PORT = 12345; // 본인 환경에 맞춰 설정
const IRIS_ENDPOINT = "/message"; // 본인 환경에 맞춰 설정
const IRIS_REPLY_URL = `${IRIS_URL}/reply`;
const IRIS_QUERY_URL = `${IRIS_URL}/query`;
const IRIS_AOT_URL = `${IRIS_URL}/aot`;
const IRIS_OK = "HTTP/1.1 200 OK\r\nContent-Length: 0\r\nConnection: close\r\n\r\n";
const IRIS_BAD_REQUEST = "HTTP/1.1 400 Bad Request\r\nContent-Length: 0\r\nConnection: close\r\n\r\n";
const IRIS_INTERNAL_ERROR = "HTTP/1.1 500 Internal Server Error\r\nContent-Length: 0\r\nConnection: close\r\n\r\n";
const IRIS_QUERY_TIMEOUT = 5000;

/** @description 카카오 서버 관련 */
const KAKAO_SERVER_URL = "http://dn-m.talk.kakao.com";

/** @description 전송 관련 */
const TEXT_TERM = 300;
const MEDIA_TERM = 5000;
const FILE_DOWNLOAD_TIMEOUT = 30000;

const SEND_RETRY_MAX = 3;
const RETRY_BACKOFF_MS = 2000;


/** @description 카카오링크 관련 */
const KALING_APP_KEY = "YOUR_APP_KEY";
const KALING_ORIGIN = "YOUR_ORIGIN";


/** @description 기타 잡다한 것들 */
const CMD_PREFIX = "!";
const VIEW_MORE = "\u200b".repeat(500);
const DIVIDE_LINE = "━".repeat(20);
const TICK_INTERVAL_MS = 1000;
const PUMP_INTERVAL_MS = 50;
const REMOVE_ZWS = true;


module.exports = {
    PATH_ROOT, PATH_LOG, PATH_CONFIG,
    PATH_FEATURE_FLAGS, PATH_ADMIN_LIST, PATH_BAN_LIST,
    PATH_CHAT_ROOM_CACHE, PATH_FIRST_CHAT,

    ADMIN_IDS,

    TYPES, FEED_TYPES,

    IRIS_PORT, IRIS_ENDPOINT, IRIS_QUERY_URL, IRIS_REPLY_URL, IRIS_AOT_URL,
    IRIS_OK, IRIS_BAD_REQUEST, IRIS_INTERNAL_ERROR, IRIS_QUERY_TIMEOUT,
    KAKAO_SERVER_URL,
    TEXT_TERM, MEDIA_TERM, FILE_DOWNLOAD_TIMEOUT,
    SEND_RETRY_MAX, RETRY_BACKOFF_MS,

    KALING_APP_KEY, KALING_ORIGIN,

    CMD_PREFIX, VIEW_MORE, DIVIDE_LINE, TICK_INTERVAL_MS, PUMP_INTERVAL_MS,
    REMOVE_ZWS
};